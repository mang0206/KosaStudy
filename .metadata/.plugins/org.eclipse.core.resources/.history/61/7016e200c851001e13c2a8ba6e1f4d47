package jdbcexam_study02;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.Scanner;

public class SelectBookLab {

	public static void main(String[] args) {
		String url = "jdbc:mysql://localhost:3306/edudb?characterEncoding=UTF-8&serverTimezone=UTC";
		String user = "jdbctest";
		String passwd = "jdbctest";
		try (Connection conn = DriverManager.getConnection(url, user, passwd);
				PreparedStatement pstmt = conn.prepareStatement("insert into book values (?, ?)");
				Scanner scan = new Scanner(System.in);){
			String bookName;
			int price;
			while(true) {
				System.out.print("도서명을 입력하세요 : ");
				bookName = scan.nextLine();
				System.out.print("가격을 입력하세요 : ");
				price = Integer.parseInt(scan.nextLine());
				System.out.println("도서분류에 대한 넘버를 입력하세요.");
				System.out.println("1.프로그래밍 언어");
				System.out.println("2.웹 프로그래밍");
				System.out.println("3.빅데이터");
				System.out.println("4.데이터베이스");
				System.out.println("5.인프라");
				System.out.println("선택(1~5)");
				
				pstmt.setString(1, bookName);
				pstmt.setInt(2, price);
				pstmt.executeUpdate();
				System.out.println("student 테이블에 데이터 삽입 완료");
				System.out.print("계속 입력하겠습니까?(y/n)");
				String aws = scan.nextLine();
				if (aws.equalsIgnoreCase("y")) {
					continue;
				} 
				System.out.println("student 테이블 데이터 삽입 작업 종료");
				break;
			}
		} catch (SQLException se) {
			System.out.println(se.getMessage());
		} 

	}

}
